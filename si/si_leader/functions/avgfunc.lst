     1                                 %line 1+1 avgfunc.asm
     2                                 
     3                                 
     4                                 
     5                                 [section .data]
     6 00000000 0A0000000000000014-     arr dq 10, 20, 30, 40, 50, 60
     7 00000000 000000000000001E00-
     8 00000000 000000000000280000-
     9 00000000 000000000032000000-
    10 00000000 000000003C00000000-
    11 00000000 000000             
    12 00000030 0600000000000000        len dq 6
    13                                 
    14                                 [section .bss]
    15 00000000 <gap>                   avg resq 1
    16 00000008 <gap>                   sum resq 1
    17                                 
    18                                 [section .text]
    19                                 [global _start]
    20                                 _start:
    21 00000000 48C7C7[00000000]        mov rdi, arr
    22 00000007 488B3425[00000000]      mov rsi, qword[len]
    23 0000000F 48C7C2[00000000]        mov rdx, avg
    24 00000016 48C7C1[00000000]        mov rcx, sum
    25 0000001D E80B000000              call stats
    26                                 
    27 00000022 48C7C03C000000          mov rax, 60
    28 00000029 48C7C700000000          mov rdi, 0
    29 00000030 0F05                    syscall
    30                                 
    31                                 
    32                                 [global stats]
    33                                 
    34                                 stats:
    35                                 
    36 00000032 49C7C200000000          mov r10, 0
    37                                 sumLoop:
    38 00000039 4A0304D7                add rax, qword[rdi + r10 * 8]
    39 0000003D 49FFC2                  inc r10
    40                                 
    41 00000040 4939F2                  cmp r10, rsi
    42 00000043 75F2                    jne sumLoop
    43                                 
    44 00000045 488901                  mov qword[rcx], rax
    45                                 
    46 00000048 52                      push rdx
    47                                 
    48 00000049 48C7C200000000          mov rdx, 0
    49 00000050 48F7F6                  div rsi
    50                                 
    51 00000053 5A                      pop rdx
    52                                 
    53 00000054 488902                  mov qword[rdx], rax
    54                                 
    55 00000057 C3                      ret
    56                                 
    57                                 
    58                                 
    59                                 
    60                                 
    61                                 
    62                                 
    63                                 
    64                                 
    65                                 
    66                                 
    67                                 
    68                                 
    69                                 
    70                                 
    71                                 
    72                                 
    73                                 
    74                                 
    75                                 
    76                                 
    77                                 
    78                                 
    79                                 
    80                                 
    81                                 
    82                                 
    83                                 
    84                                 
