     1                                 %line 1+1 statsfunWlocal.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 [section .data]
    10 00000000 0A0000000000000014-     arr dq 10, 20, 30, 40, 50, 60
    11 00000000 000000000000001E00-
    12 00000000 000000000000280000-
    13 00000000 000000000032000000-
    14 00000000 000000003C00000000-
    15 00000000 000000             
    16 00000030 0600000000000000        len dq 6
    17                                 
    18                                 [section .bss]
    19 00000000 <gap>                   avg resq 1
    20 00000008 <gap>                   sum resq 1
    21                                 
    22                                 [section .text]
    23                                 [global _start]
    24                                 _start:
    25                                 
    26                                 
    27 00000000 48C7C005000000          mov rax, 5
    28                                 
    29                                 
    30 00000007 48C7C103000000          mov rcx, 3
    31                                 arrLoop:
    32                                 
    33 0000000E 51                      push rcx
    34                                 
    35                                 
    36                                 
    37                                 
    38 0000000F 48C7C7[00000000]        mov rdi, arr
    39 00000016 488B3425[00000000]      mov rsi, qword[len]
    40 0000001E 48C7C2[00000000]        mov rdx, avg
    41 00000025 48C7C1[00000000]        mov rcx, sum
    42 0000002C E80E000000              call stats
    43                                 
    44 00000031 59                      pop rcx
    45                                 
    46 00000032 E2D8                    loop arrLoop
    47                                 
    48 00000034 48C7C03C000000          mov rax, 60
    49 0000003B 48C7C700000000          mov rdi, 0
    50 00000042 0F05                    syscall
    51                                 
    52                                 
    53                                 [global stats]
    54                                 
    55                                 stats:
    56 00000044 50                      push rax
    57 00000045 49C7C200000000          mov r10, 0
    58                                 sumLoop:
    59 0000004C 4A0304D7                add rax, qword[rdi + r10 * 8]
    60 00000050 49FFC2                  inc r10
    61                                 
    62 00000053 4939F2                  cmp r10, rsi
    63 00000056 75F2                    jne sumLoop
    64                                 
    65 00000058 488901                  mov qword[rcx], rax
    66                                 
    67 0000005B 52                      push rdx
    68                                 
    69 0000005C 48C7C200000000          mov rdx, 0
    70 00000063 48F7F6                  div rsi
    71                                 
    72 00000066 5A                      pop rdx
    73                                 
    74 00000067 488902                  mov qword[rdx], rax
    75                                 
    76 0000006A 58                      pop rax
    77 0000006B C3                      ret
    78                                 
    79                                 
    80                                 
    81                                 
    82                                 
    83                                 
    84                                 
    85                                 
    86                                 
    87                                 
    88                                 
    89                                 
    90                                 
    91                                 
    92                                 
    93                                 
    94                                 
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 
   100                                 
   101                                 
   102                                 
   103                                 
   104                                 
   105                                 
   106                                 
