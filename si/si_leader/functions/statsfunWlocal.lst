     1                                 %line 1+1 statsfunWlocal.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 [section .data]
     9 00000000 0A0000000000000014-     arr dq 10, 20, 30, 40, 50, 60
    10 00000000 000000000000001E00-
    11 00000000 000000000000280000-
    12 00000000 000000000032000000-
    13 00000000 000000003C00000000-
    14 00000000 000000             
    15 00000030 0600000000000000        len dq 6
    16                                 
    17                                 [section .bss]
    18 00000000 <gap>                   avg resq 1
    19 00000008 <gap>                   sum resq 1
    20                                 
    21                                 [section .text]
    22                                 [global _start]
    23                                 _start:
    24                                 
    25                                 
    26 00000000 48C7C005000000          mov rax, 5
    27                                 
    28                                 
    29 00000007 48C7C103000000          mov rcx, 3
    30                                 arrLoop:
    31                                 
    32 0000000E 51                      push rcx
    33                                 
    34                                 
    35                                 
    36                                 
    37 0000000F 48C7C7[00000000]        mov rdi, arr
    38 00000016 488B3425[00000000]      mov rsi, qword[len]
    39 0000001E 48C7C2[00000000]        mov rdx, sum
    40 00000025 48C7C1[00000000]        mov rcx, avg
    41 0000002C E80E000000              call stats
    42                                 
    43 00000031 59                      pop rcx
    44                                 
    45 00000032 E2D8                    loop arrLoop
    46                                 
    47 00000034 48C7C03C000000          mov rax, 60
    48 0000003B 48C7C700000000          mov rdi, 0
    49 00000042 0F05                    syscall
    50                                 
    51                                 [global stats]
    52                                 
    53                                 stats:
    54 00000044 50                      push rax
    55 00000045 49C7C200000000          mov r10, 0
    56                                 sumLoop:
    57 0000004C 4A0304D7                add rax, qword[rdi + r10 * 8]
    58 00000050 49FFC2                  inc r10
    59                                 
    60 00000053 4939F2                  cmp r10, rsi
    61 00000056 75F2                    jne sumLoop
    62                                 
    63 00000058 488902                  mov qword[rdx], rax
    64                                 
    65 0000005B 48C7C200000000          mov rdx, 0
    66 00000062 48F7F6                  div rsi
    67 00000065 488901                  mov qword[rcx], rax
    68                                 
    69 00000068 58                      pop rax
    70 00000069 C3                      ret
    71                                 
    72                                 
    73                                 
    74                                 
    75                                 
    76                                 
    77                                 
    78                                 
    79                                 
    80                                 
    81                                 
    82                                 
    83                                 
    84                                 
    85                                 
    86                                 
    87                                 
    88                                 
    89                                 
    90                                 
    91                                 
    92                                 
    93                                 
    94                                 
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 
