     1                                 %line 1+1 fb_nocomment.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33                                 
    34                                 
    35                                 
    36                                 
    37                                 
    38                                 
    39                                 
    40                                 
    41                                 
    42                                 
    43                                 
    44                                 
    45                                 
    46                                 [section .data]
    47                                 
    48 00000000 0C002300A1FF2C0104-    arr dw 12, 35, -95, 300, 4, 273, 15, -903, 33, -100
    49 00000000 0011010F0079FC2100-
    50 00000000 9CFF               
    51                                 
    52                                 [section .bss]
    53 00000000 <gap>                  fizz resd 10
    54 00000028 <gap>                  buzz resd 10
    55 00000050 <gap>                  fizzbuzz resd 10
    56 00000078 <gap>                  sum_fizz resw 1
    57 0000007A <gap>                  sum_buzz resw 1
    58 0000007C <gap>                  sum_fizzbuzz resw 1
    59                                 
    60                                 [section .text]
    61                                 
    62                                 [global _start]
    63                                 
    64                                 _start:
    65                                 
    66 00000000 48C7C000000000          mov rax, 0
    67 00000007 48C7C200000000          mov rdx, 0
    68 0000000E 48C7C300000000          mov rbx, 0
    69                                 
    70 00000015 48C7C10A000000          mov rcx, 10
    71 0000001C 48C7C600000000          mov rsi, 0
    72 00000023 48C7C700000000          mov rdi, 0
    73 0000002A 49C7C300000000          mov r11, 0
    74 00000031 49C7C400000000          mov r12, 0
    75                                 
    76                                 looper:
    77 00000038 668B86[00000000]        mov ax, word[arr + rsi]
    78 0000003F 66BB0300                mov bx, 3
    79 00000043 6699                    cwd
    80 00000045 66F7FB                  idiv bx
    81 00000048 6683FA00                cmp dx, 0
    82 0000004C 741F                    je div_by_3
    83                                 
    84 0000004E 668B86[00000000]        mov ax, word[arr + rsi]
    85 00000055 66BB0500                mov bx, 5
    86 00000059 6699                    cwd
    87 0000005B 66F7FB                  idiv bx
    88 0000005E 6683FA00                cmp dx, 0
    89 00000062 7474                    je div_by_5
    90                                 
    91 00000064 4883C602                add rsi, 2
    92 00000068 E2CC                    loop looper
    93 0000006A E994000000              jmp end
    94                                 
    95                                 div_by_3:
    96 0000006F 668B86[00000000]        mov ax, word[arr + rsi]
    97 00000076 66BB0500                mov bx, 5
    98 0000007A 6699                    cwd
    99 0000007C 66F7FB                  idiv bx
   100 0000007F 6683FA00                cmp dx, 0
   101 00000083 7422                    je div_by_both
   102                                 
   103 00000085 668B86[00000000]        mov ax, word[arr + rsi]
   104 0000008C 0FBFC0                  movsx eax, ax
   105 0000008F 010425[00000000]        add dword[sum_fizz], eax
   106 00000096 668987[00000000]        mov word[fizz + rdi], ax
   107 0000009D 4883C602                add rsi, 2
   108 000000A1 4883C702                add rdi, 2
   109 000000A5 E28F                    loop looper
   110 000000A7 EB5D                    jmp end
   111                                 
   112                                 div_by_both:
   113 000000A9 668B86[00000000]        mov ax, word[arr + rsi]
   114 000000B0 0FBFC0                  movsx eax, ax
   115 000000B3 010425[00000000]        add dword[sum_fizzbuzz], eax
   116 000000BA 6641898424[00000000]      mov word[fizzbuzz + r12], ax
   117 000000C3 4883C602                add rsi, 2
   118 000000C7 4983C402                add r12, 2
   119 000000CB 48FFC9                  dec rcx
   120 000000CE 4883F900                cmp rcx, 0
   121 000000D2 0F855AFFFFFF            jne looper
   122 000000D8 EB2C                    jmp end
   123                                 
   124                                 div_by_5:
   125 000000DA 668B86[00000000]        mov ax, word[arr + rsi]
   126 000000E1 0FBFC0                  movsx eax, ax
   127 000000E4 010425[00000000]        add dword[sum_buzz], eax
   128 000000EB 66418983[00000000]      mov word[buzz + r11], ax
   129 000000F3 4883C602                add rsi, 2
   130 000000F7 4983C302                add r11, 2
   131 000000FB 48FFC9                  dec rcx
   132 000000FE 4883F900                cmp rcx, 0
   133 00000102 0F852AFFFFFF            jne looper
   134                                 
   135                                 end:
   136 00000108 48C7C03C000000          mov rax, 60
   137 0000010F 48C7C700000000          mov rdi, 0
   138                                  stscall
   139                                 
