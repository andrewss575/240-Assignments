     1                                 %line 1+1 fizzbuzz2.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33                                 
    34                                 
    35                                 
    36                                 
    37                                 
    38                                 
    39                                 
    40                                 
    41                                 
    42                                 
    43                                 
    44                                 
    45                                 [section .data]
    46                                 
    47 00000000 0C0023005F002C0104-    arr dw 12, 35, 95, 300, 4, 273, 15, 988, 33, 100
    48 00000000 0011010F00DC032100-
    49 00000000 6400               
    50                                 
    51                                 
    52                                 
    53                                 
    54                                 [section .bss]
    55 00000000 <gap>                  fizz resw 10
    56 00000014 <gap>                  buzz resw 10
    57 00000028 <gap>                  fizzbuzz resw 10
    58                                 
    59                                 [section .text]
    60                                 
    61                                 [global _start]
    62                                 
    63                                 _start:
    64                                 
    65 00000000 48C7C000000000          mov rax, 0
    66 00000007 48C7C200000000          mov rdx, 0
    67 0000000E 48C7C300000000          mov rbx, 0
    68                                 
    69 00000015 48C7C10A000000          mov rcx, 10
    70 0000001C 48C7C600000000          mov rsi, 0
    71 00000023 48C7C700000000          mov rdi, 0
    72 0000002A 49C7C300000000          mov r11, 0
    73 00000031 49C7C400000000          mov r12, 0
    74                                 
    75                                 looper:
    76 00000038 668B86[00000000]        mov ax, word[arr + rsi]
    77                                 
    78                                 
    79                                 
    80                                 
    81                                 
    82 0000003F 66BB0300                mov bx, 3
    83 00000043 66BA0000                mov dx, 0
    84                                 
    85                                 
    86                                 
    87 00000047 66F7F3                  div bx
    88 0000004A 6683FA00                cmp dx, 0
    89 0000004E 741E                    je div_by_3
    90                                 
    91                                 
    92                                 
    93                                 
    94                                 
    95                                 
    96 00000050 668B86[00000000]        mov ax, word[arr + rsi]
    97 00000057 66BB0500                mov bx, 5
    98 0000005B 66BA0000                mov dx, 0
    99 0000005F 66F7F3                  div bx
   100 00000062 6683FA00                cmp dx, 0
   101 00000066 745F                    je div_by_5
   102                                 
   103                                 
   104 00000068 4883C602                add rsi, 2
   105                                 
   106                                 
   107 0000006C E2C8                    loop looper
   108 0000006E EB7B                    jmp end
   109                                 
   110                                 div_by_3:
   111                                 
   112                                 
   113                                 
   114                                 
   115                                 
   116                                 
   117                                 
   118 00000070 668B86[00000000]        mov ax, word[arr + rsi]
   119 00000077 66BB0500                mov bx, 5
   120 0000007B 66BA0000                mov dx, 0
   121 0000007F 66F7F3                  div bx
   122 00000082 6683FA00                cmp dx, 0
   123 00000086 7418                    je div_by_both
   124                                 
   125                                 
   126                                 
   127                                 
   128 00000088 668B86[00000000]        mov ax, word[arr + rsi]
   129 0000008F 668987[00000000]        mov word[fizz + rdi], ax
   130 00000096 4883C602                add rsi, 2
   131                                 
   132                                 
   133 0000009A 4883C702                add rdi, 2
   134                                 
   135                                 
   136 0000009E E296                    loop looper
   137 000000A0 EB49                    jmp end
   138                                 
   139                                 
   140                                 
   141                                 div_by_both:
   142 000000A2 668B86[00000000]        mov ax, word[arr + rsi]
   143 000000A9 6641898424[00000000]      mov word[fizzbuzz + r12], ax
   144 000000B2 4883C602                add rsi, 2
   145                                 
   146                                 
   147 000000B6 4983C402                add r12, 2
   148                                 
   149                                 
   150                                 
   151                                 
   152 000000BA 48FFC9                  dec rcx
   153 000000BD 4883F900                cmp rcx, 0
   154 000000C1 0F856BFFFFFF            jne looper
   155 000000C7 EB22                    jmp end
   156                                 
   157                                 
   158                                 
   159                                 div_by_5:
   160 000000C9 668B86[00000000]        mov ax, word[arr + rsi]
   161 000000D0 66418983[00000000]      mov word[buzz + r11], ax
   162 000000D8 4883C602                add rsi, 2
   163                                 
   164                                 
   165 000000DC 4983C302                add r11, 2
   166                                 
   167                                 
   168                                 
   169                                 
   170 000000E0 48FFC9                  dec rcx
   171 000000E3 4883F900                cmp rcx, 0
   172 000000E7 0F8545FFFFFF            jne looper
   173                                 
   174                                 
   175                                 
   176                                 end:
   177 000000ED 48C7C03C000000          mov rax, 60
   178 000000F4 48C7C700000000          mov rdi, 0
   179                                  stscall
   180                                 
