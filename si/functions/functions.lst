     1                                 %line 1+1 functions.asm
     2                                 
     3                                 
     4                                 
     5                                 [section .data]
     6 00000000 0A0000000000000014-     array dq 10, 20, 30, 40, 50, 60
     7 00000000 000000000000001E00-
     8 00000000 000000000000280000-
     9 00000000 000000000032000000-
    10 00000000 000000003C00000000-
    11 00000000 000000             
    12 00000030 0600000000000000        len dq 6
    13 00000038 0000000000000000        sum dq 0
    14 00000040 0000000000000000        ave dq 0
    15                                 
    16                                 [section .text]
    17                                 [global _start]
    18                                 
    19                                 _start:
    20 00000000 49C7C305000000          mov r11, 5
    21                                 
    22 00000007 48C7C7[00000000]        mov rdi, array
    23 0000000E 488B3425[00000000]      mov rsi, qword[len]
    24 00000016 48C7C2[00000000]        mov rdx, sum
    25 0000001D 48C7C1[00000000]        mov rcx, ave
    26 00000024 E80B000000              call average
    27                                 
    28 00000029 48C7C03C000000          mov rax, 60
    29 00000030 48C7C700000000          mov rdi, 0
    30 00000037 0F05                    syscall
    31                                 
    32                                 
    33                                 
    34                                 [global average]
    35                                 
    36                                 average:
    37                                 
    38 00000039 4154                    push r12
    39 0000003B 4983C302                add r11, 2
    40 0000003F 48C7C000000000          mov rax, 0
    41 00000046 49C7C200000000          mov r10, 0
    42                                 
    43                                 sumLoop:
    44 0000004D 4A0304D7                add rax, qword[rdi + r10*8]
    45 00000051 49FFC2                  inc r10
    46 00000054 4939F2                  cmp r10,rsi
    47 00000057 75F2                    jne sumLoop
    48                                 
    49 00000059 48C7C200000000          mov rdx, 0
    50 00000060 48F7F6                  div rsi
    51 00000063 488901                  mov qword[rcx], rax
    52                                 
    53 00000066 415C                    pop r12
    54 00000068 C3                      ret
    55                                 
    56                                 
